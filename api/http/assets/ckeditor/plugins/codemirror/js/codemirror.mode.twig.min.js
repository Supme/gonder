(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../../addon/mode/multiplex"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../../addon/mode/multiplex"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("twig:inner",function(){var d=["and","as","autoescape","endautoescape","block","do","endblock","else","elseif","extends","for","endfor","embed","endembed","filter","endfilter","flush","from","if","endif","in","is","include","import","not","or","set","spaceless","endspaceless","with","endwith","trans","endtrans","blocktrans","endblocktrans","macro","endmacro","use","verbatim","endverbatim"],c=/^[+\-*&%=<>!?|~^]/,b=/^[:\[\(\{]/,f=["true","false","null","empty","defined","divisibleby","divisible by","even","odd","iterable","sameas","same as"],e=/^(\d[+\-\*\/])?\d+(\.\d+)?/;d=new RegExp("(("+d.join(")|(")+"))\\b");f=new RegExp("(("+f.join(")|(")+"))\\b");function g(j,i){var h=j.peek();if(i.incomment){if(!j.skipTo("#}")){j.skipToEnd()}else{j.eatWhile(/\#|}/);i.incomment=false}return"comment"}else{if(i.intag){if(i.operator){i.operator=false;if(j.match(f)){return"atom"}if(j.match(e)){return"number"}}if(i.sign){i.sign=false;if(j.match(f)){return"atom"}if(j.match(e)){return"number"}}if(i.instring){if(h==i.instring){i.instring=false}j.next();return"string"}else{if(h=="'"||h=='"'){i.instring=h;j.next();return"string"}else{if(j.match(i.intag+"}")||j.eat("-")&&j.match(i.intag+"}")){i.intag=false;return"tag"}else{if(j.match(c)){i.operator=true;return"operator"}else{if(j.match(b)){i.sign=true}else{if(j.eat(" ")||j.sol()){if(j.match(d)){return"keyword"}if(j.match(f)){return"atom"}if(j.match(e)){return"number"}if(j.sol()){j.next()}}else{j.next()}}}}}}return"variable"}else{if(j.eat("{")){if(h=j.eat("#")){i.incomment=true;if(!j.skipTo("#}")){j.skipToEnd()}else{j.eatWhile(/\#|}/);i.incomment=false}return"comment"}else{if(h=j.eat(/\{|%/)){i.intag=h;if(h=="{"){i.intag="}"}j.eat("-");return"tag"}}}}}j.next()}return{startState:function(){return{}},token:function(i,h){return g(i,h)}}});a.defineMode("twig",function(c,d){var b=a.getMode(c,"twig:inner");if(!d||!d.base){return b}return a.multiplexingMode(a.getMode(c,d.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:b,parseDelimiters:true})});a.defineMIME("text/x-twig","twig")});